{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schema.gns.network/theme/v1",
  "title": "PANTHERA Theme Schema",
  "description": "Schema for GNS-CMS themes - visual rendering system for gSites",
  "type": "object",
  "required": ["id", "name", "version", "entityTypes", "tokens"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9-]+$",
      "minLength": 3,
      "maxLength": 50,
      "description": "Unique theme identifier (e.g., 'profile-minimal')"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 100,
      "description": "Human-readable theme name"
    },
    "description": {
      "type": "string",
      "maxLength": 500,
      "description": "Theme description for marketplace"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version (e.g., '1.0.0')"
    },
    "author": {
      "type": "string",
      "description": "Creator's @handle or namespace@"
    },
    "license": {
      "type": "string",
      "enum": ["free", "standard", "premium", "exclusive"],
      "default": "free"
    },
    "price": {
      "type": "object",
      "properties": {
        "amount": { "type": "number", "minimum": 0 },
        "currency": { "type": "string", "enum": ["USD", "XLM", "GNS"], "default": "USD" }
      }
    },
    "entityTypes": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["Person", "Business", "Store", "Service", "Publication", "Community", "Organization", "Event", "Product", "Place"]
      },
      "minItems": 1,
      "description": "Which gSite entity types this theme supports"
    },
    "categories": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Theme categories for filtering (e.g., 'cafe', 'tech', 'creative')"
    },
    "tokens": {
      "$ref": "#/$defs/designTokens"
    },
    "components": {
      "$ref": "#/$defs/componentStyles"
    },
    "layout": {
      "$ref": "#/$defs/layoutConfig"
    },
    "darkMode": {
      "$ref": "#/$defs/darkModeConfig"
    },
    "preview": {
      "type": "object",
      "properties": {
        "thumbnail": { "type": "string", "format": "uri" },
        "screenshots": {
          "type": "array",
          "items": { "type": "string", "format": "uri" },
          "maxItems": 5
        }
      }
    },
    "signature": {
      "type": "string",
      "pattern": "^ed25519:[a-f0-9]+$",
      "description": "Theme creator's signature"
    }
  },
  "$defs": {
    "hexColor": {
      "type": "string",
      "pattern": "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"
    },
    "rgbaColor": {
      "type": "string",
      "pattern": "^rgba?\\(\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(,\\s*[0-9.]+)?\\)$"
    },
    "color": {
      "oneOf": [
        { "$ref": "#/$defs/hexColor" },
        { "$ref": "#/$defs/rgbaColor" }
      ]
    },
    "allowedFonts": {
      "type": "string",
      "enum": [
        "Inter", "Roboto", "Open Sans", "Lato", "Montserrat", "Poppins",
        "Merriweather", "Playfair Display", "Lora", "Source Serif Pro",
        "JetBrains Mono", "Fira Code", "Source Code Pro",
        "system-ui"
      ]
    },
    "designTokens": {
      "type": "object",
      "required": ["colors"],
      "properties": {
        "colors": {
          "type": "object",
          "required": ["primary", "secondary", "surface", "background", "onPrimary", "onSurface"],
          "properties": {
            "primary": { "$ref": "#/$defs/color" },
            "primaryVariant": { "$ref": "#/$defs/color" },
            "secondary": { "$ref": "#/$defs/color" },
            "secondaryVariant": { "$ref": "#/$defs/color" },
            "surface": { "$ref": "#/$defs/color" },
            "surfaceVariant": { "$ref": "#/$defs/color" },
            "background": { "$ref": "#/$defs/color" },
            "onPrimary": { "$ref": "#/$defs/color" },
            "onSecondary": { "$ref": "#/$defs/color" },
            "onSurface": { "$ref": "#/$defs/color" },
            "onBackground": { "$ref": "#/$defs/color" },
            "error": { "$ref": "#/$defs/color" },
            "success": { "$ref": "#/$defs/color" },
            "warning": { "$ref": "#/$defs/color" },
            "info": { "$ref": "#/$defs/color" },
            "divider": { "$ref": "#/$defs/color" },
            "disabled": { "$ref": "#/$defs/color" },
            "shadow": { "$ref": "#/$defs/color" },
            "trustLow": { "$ref": "#/$defs/color" },
            "trustMedium": { "$ref": "#/$defs/color" },
            "trustHigh": { "$ref": "#/$defs/color" },
            "trustVerified": { "$ref": "#/$defs/color" }
          }
        },
        "typography": {
          "type": "object",
          "properties": {
            "fontFamily": {
              "type": "object",
              "properties": {
                "primary": { "$ref": "#/$defs/allowedFonts" },
                "secondary": { "$ref": "#/$defs/allowedFonts" },
                "mono": { "$ref": "#/$defs/allowedFonts" }
              }
            },
            "fontSize": {
              "type": "object",
              "properties": {
                "xs": { "type": "number", "minimum": 10, "maximum": 14 },
                "sm": { "type": "number", "minimum": 12, "maximum": 16 },
                "base": { "type": "number", "minimum": 14, "maximum": 18 },
                "lg": { "type": "number", "minimum": 16, "maximum": 22 },
                "xl": { "type": "number", "minimum": 18, "maximum": 26 },
                "2xl": { "type": "number", "minimum": 20, "maximum": 32 },
                "3xl": { "type": "number", "minimum": 24, "maximum": 40 },
                "4xl": { "type": "number", "minimum": 30, "maximum": 48 },
                "5xl": { "type": "number", "minimum": 36, "maximum": 64 }
              }
            },
            "fontWeight": {
              "type": "object",
              "properties": {
                "normal": { "type": "integer", "enum": [400] },
                "medium": { "type": "integer", "enum": [500] },
                "semibold": { "type": "integer", "enum": [600] },
                "bold": { "type": "integer", "enum": [700] }
              }
            },
            "lineHeight": {
              "type": "object",
              "properties": {
                "tight": { "type": "number", "minimum": 1, "maximum": 1.3 },
                "normal": { "type": "number", "minimum": 1.4, "maximum": 1.6 },
                "relaxed": { "type": "number", "minimum": 1.6, "maximum": 2 }
              }
            }
          }
        },
        "spacing": {
          "type": "object",
          "properties": {
            "0": { "const": 0 },
            "1": { "type": "number", "minimum": 2, "maximum": 6 },
            "2": { "type": "number", "minimum": 6, "maximum": 12 },
            "3": { "type": "number", "minimum": 10, "maximum": 16 },
            "4": { "type": "number", "minimum": 14, "maximum": 20 },
            "5": { "type": "number", "minimum": 18, "maximum": 24 },
            "6": { "type": "number", "minimum": 22, "maximum": 28 },
            "8": { "type": "number", "minimum": 28, "maximum": 40 },
            "10": { "type": "number", "minimum": 36, "maximum": 48 },
            "12": { "type": "number", "minimum": 44, "maximum": 56 },
            "16": { "type": "number", "minimum": 56, "maximum": 72 }
          }
        },
        "borders": {
          "type": "object",
          "properties": {
            "radius": {
              "type": "object",
              "properties": {
                "none": { "const": 0 },
                "sm": { "type": "number", "minimum": 2, "maximum": 6 },
                "md": { "type": "number", "minimum": 6, "maximum": 12 },
                "lg": { "type": "number", "minimum": 10, "maximum": 16 },
                "xl": { "type": "number", "minimum": 14, "maximum": 24 },
                "2xl": { "type": "number", "minimum": 20, "maximum": 32 },
                "full": { "const": 9999 }
              }
            },
            "width": {
              "type": "object",
              "properties": {
                "thin": { "type": "number", "enum": [1] },
                "medium": { "type": "number", "enum": [2] },
                "thick": { "type": "number", "minimum": 3, "maximum": 6 }
              }
            }
          }
        },
        "shadows": {
          "type": "object",
          "properties": {
            "none": { "const": "none" },
            "sm": { "type": "string" },
            "md": { "type": "string" },
            "lg": { "type": "string" },
            "xl": { "type": "string" }
          }
        }
      }
    },
    "componentStyles": {
      "type": "object",
      "properties": {
        "card": {
          "type": "object",
          "properties": {
            "variant": { "type": "string", "enum": ["elevated", "outlined", "filled"] },
            "shadow": { "type": "string", "enum": ["none", "sm", "md", "lg", "xl"] },
            "borderRadius": { "type": "string", "enum": ["none", "sm", "md", "lg", "xl", "2xl"] }
          }
        },
        "button": {
          "type": "object",
          "properties": {
            "variant": { "type": "string", "enum": ["filled", "outlined", "text", "icon"] },
            "borderRadius": { "type": "string", "enum": ["none", "sm", "md", "lg", "xl", "full"] },
            "size": { "type": "string", "enum": ["sm", "md", "lg"] }
          }
        },
        "avatar": {
          "type": "object",
          "properties": {
            "shape": { "type": "string", "enum": ["circle", "rounded", "square"] },
            "border": { "type": "boolean" },
            "borderColor": { "type": "string", "enum": ["primary", "secondary", "surface", "white"] }
          }
        },
        "trustBadge": {
          "type": "object",
          "properties": {
            "style": { "type": "string", "enum": ["minimal", "detailed", "compact"] },
            "showBreadcrumbs": { "type": "boolean" },
            "showVerifications": { "type": "boolean" }
          }
        },
        "actionBar": {
          "type": "object",
          "properties": {
            "position": { "type": "string", "enum": ["inline", "fixed-bottom", "floating"] },
            "style": { "type": "string", "enum": ["icons", "labels", "both"] }
          }
        },
        "header": {
          "type": "object",
          "properties": {
            "style": { "type": "string", "enum": ["cover", "minimal", "centered"] },
            "coverHeight": { "type": "number", "minimum": 100, "maximum": 400 },
            "avatarPosition": { "type": "string", "enum": ["left", "center", "overlap"] }
          }
        },
        "section": {
          "type": "object",
          "properties": {
            "divider": { "type": "string", "enum": ["line", "space", "none"] },
            "titleStyle": { "type": "string", "enum": ["uppercase", "normal", "bold"] }
          }
        }
      }
    },
    "layoutConfig": {
      "type": "object",
      "properties": {
        "template": {
          "type": "string",
          "enum": ["profile", "storefront", "ecommerce", "publication", "service", "community", "organization", "event", "product", "place"]
        },
        "variant": {
          "type": "string",
          "description": "Template variant (e.g., 'minimal', 'creative', 'professional')"
        },
        "sections": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "header", "actions", "about", "bio", "facets", "links", "skills",
              "hours", "menu", "products", "services", "reviews", "team",
              "articles", "events", "gallery", "contact", "location", "social"
            ]
          },
          "description": "Ordered list of sections to display"
        },
        "gridColumns": {
          "type": "object",
          "properties": {
            "mobile": { "type": "integer", "minimum": 1, "maximum": 2 },
            "tablet": { "type": "integer", "minimum": 2, "maximum": 4 },
            "desktop": { "type": "integer", "minimum": 2, "maximum": 6 }
          }
        },
        "maxWidth": {
          "type": "string",
          "enum": ["sm", "md", "lg", "xl", "full"]
        }
      }
    },
    "darkModeConfig": {
      "type": "object",
      "properties": {
        "enabled": { "type": "boolean", "default": true },
        "colors": {
          "type": "object",
          "description": "Override colors for dark mode",
          "properties": {
            "background": { "$ref": "#/$defs/color" },
            "surface": { "$ref": "#/$defs/color" },
            "surfaceVariant": { "$ref": "#/$defs/color" },
            "onBackground": { "$ref": "#/$defs/color" },
            "onSurface": { "$ref": "#/$defs/color" },
            "divider": { "$ref": "#/$defs/color" },
            "shadow": { "$ref": "#/$defs/color" }
          }
        }
      }
    }
  }
}
